<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Broker.java</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&amp;family=Roboto:wght@300;400;500&amp;family=Roboto+Mono:wght@300;400;500&amp;display=swap" rel="stylesheet" />
    <style>
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; }
        .slide-container { max-width: 100%; width: 100vw; min-height: 720px; background-color: #0a2540; color: white; display: flex; flex-direction: column; font-family: "Roboto", sans-serif; }
        .slide-content { flex: 1; display: flex; flex-direction: column; padding: 35px 45px; }
        .slide-header { margin-bottom: 20px; }
        .slide-title { font-family: "Montserrat", sans-serif; font-size: 32px; font-weight: 700; color: #2e86ab; margin: 0 0 10px 0; line-height: 1.2; }
        .code-container { flex: 1; background-color: rgba(255,255,255,0.1); border-radius: 8px; padding: 15px; margin-top: 8px; position: relative; overflow: hidden; }
        .code-header { display:flex; justify-content: space-between; margin-bottom: 10px; }
        .code-title { font-family: "Montserrat", sans-serif; font-size: 16px; font-weight: 600; color: rgba(255,255,255,0.9); }
        .code-dots { display:flex; }
        .code-dot { width: 12px; height: 12px; border-radius: 50%; margin-left: 6px; }
        .dot-red { background-color: #ff5f56; } .dot-yellow { background-color:#ffbd2e; } .dot-green { background-color:#27c93f; }
        pre { margin:0; background-color:#1e2f45; border-radius:6px; padding:15px; overflow:auto; max-height:100%; font-family:"Roboto Mono", monospace; font-size:15px; line-height:1.3; }
        code { font-family:"Roboto Mono", monospace; }
        .code-keyword { color: #c792ea; }
        .code-type { color: #ffcb6b; }
        .code-method { color: #82aaff; }
        .code-comment { color: #546e7a; }
        .code-string { color: #c3e88d; }
    </style>
</head>
<body>
<div class="slide-container">
    <div class="slide-content">
        <div class="slide-header">
            <h1 class="slide-title">Broker.java</h1>
        </div>
        <div class="code-container">
            <div class="code-header">
                <div class="code-title">Broker.java</div>
                <div class="code-dots">
                    <div class="code-dot dot-red"></div>
                    <div class="code-dot dot-yellow"></div>
                    <div class="code-dot dot-green"></div>
                </div>
            </div>
            <pre><code><span class="code-keyword">package</span> pubsub;

<span class="code-keyword">import</span> <span class="code-type">java.util.*</span>;

<span class="code-comment">// "Broker": intermedi谩rio que gerencia t贸picos e assinantes.</span>
<span class="code-comment">//  ele quem recebe publica莽玫es e as repassa aos inscritos no t贸pico.</span>
<span class="code-keyword">public</span> <span class="code-keyword">class</span> <span class="code-type">Broker</span> {
    <span class="code-keyword">private</span> <span class="code-type">Map</span>&lt;<span class="code-type">String</span>, <span class="code-type">List</span>&lt;<span class="code-type">Subscriber</span>&gt;&gt; topicos = <span class="code-keyword">new</span> <span class="code-type">HashMap</span>&lt;&gt;();

    <span class="code-comment">// Inscreve um subscriber em um t贸pico espec铆fico</span>
    <span class="code-keyword">public</span> <span class="code-keyword">void</span> <span class="code-method">subscribe</span>(<span class="code-type">String</span> topico, <span class="code-type">Subscriber</span> sub) {
        topicos.<span class="code-method">computeIfAbsent</span>(topico, k -&gt; <span class="code-keyword">new</span> <span class="code-type">ArrayList</span>&lt;&gt;()).<span class="code-method">add</span>(sub);
        System.out.<span class="code-method">println</span>(<span class="code-string">" "</span> + sub.<span class="code-method">getNome</span>() + <span class="code-string">" se inscreveu no t贸pico: "</span> + topico);
    }

    <span class="code-comment">// Publica uma mensagem no t贸pico: o broker entrega a todos os inscritos</span>
    <span class="code-keyword">public</span> <span class="code-keyword">void</span> <span class="code-method">publish</span>(<span class="code-type">String</span> topico, <span class="code-type">String</span> mensagem) {
        System.out.<span class="code-method">println</span>();
        System.out.<span class="code-method">println</span>(<span class="code-string">" Publicando no t贸pico '"</span> + topico + <span class="code-string">"': "</span> + mensagem);
        <span class="code-type">List</span>&lt;<span class="code-type">Subscriber</span>&gt; subs = topicos.<span class="code-method">get</span>(topico);
        <span class="code-keyword">if</span> (subs != <span class="code-keyword">null</span>) subs.<span class="code-method">forEach</span>(s -&gt; s.<span class="code-method">receberMensagem</span>(topico, mensagem));
        <span class="code-keyword">else</span> System.out.<span class="code-method">println</span>(<span class="code-string">"(Sem inscritos para este t贸pico)"</span>);
    }
}</code></pre>
        </div>
    </div>
</div>
</body>
</html>